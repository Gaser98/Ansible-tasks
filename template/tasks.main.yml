- name: Install Apache2 package
  apt:
    name: "{{ apache_package }}"
    state: present

- name: Copy template to host
  template:
    src: "{{ template_file }}"
    dest: "/etc/apache2/apache2.conf"
    mode: 0644
  notify: restart apache2

- name: Copy files to host
  copy:
    src: "{{ item }}"
    dest: "/var/www/html/{{ item }}"
    mode: 0644
  with_items: "{{ web_files }}"
  notify: restart apache2

- name: Ensure Apache2 service is running
  service:
    name: "{{ apache_package }}"
    state: started
    enabled: yes
#added later
- name: restart apache2
  service:
    name: "{{ apache_package }}"
    state: restarted
